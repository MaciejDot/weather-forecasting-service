(this["webpackJsonpweather-forecasting-service"]=this["webpackJsonpweather-forecasting-service"]||[]).push([[0],{74:function(e,t,i){"use strict";i.r(t);var n,r=i(0),a=i.n(r),o=i(24),s=i.n(o),c=i(9),l=i(33),d=i(99),u=i(2),j=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"h2",align:"center",children:"404"}),Object(u.jsx)(d.a,{variant:"h4",align:"center",children:"Page not found"})]})},b=i(104),h=i(101),v=i(102),m=i(103),g=i(21),x=function(e){var t,i;return Object(u.jsx)(h.a,{children:Object(u.jsx)(v.a,{component:g.b,to:e.to,children:Object(u.jsx)(m.a,{children:Object(u.jsxs)(b.a,{container:!0,children:[Object(u.jsx)(b.a,{item:!0,xs:6,children:Object(u.jsx)(d.a,{variant:"h6",align:"left",children:e.locationLabel})}),Object(u.jsx)(b.a,{item:!0,xs:6,children:Object(u.jsxs)(d.a,{variant:"h6",align:"right",children:[null!==(t=null===(i=e.temp)||void 0===i?void 0:i.toFixed(0))&&void 0!==t?t:"-","\xb0C"]})})]})})})})},p=i(32);!function(e){e[e.Undefined=0]="Undefined",e[e.Success=1]="Success",e[e.ErrorUserOrDeviceRejection=2]="ErrorUserOrDeviceRejection",e[e.ErrorLocationIsNotAvailableInBrowser=3]="ErrorLocationIsNotAvailableInBrowser"}(n||(n={}));var O={status:n.Undefined,isLoading:!0,location:{latitude:0,longitude:0},alreadyRequested:!1,setAlreadyRequested:function(e){},setLocation:function(e){},setIsLoading:function(e){},setStatus:function(e){}},f=a.a.createContext(O);function y(){var e=Object(r.useContext)(f);return!e.alreadyRequested&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setAlreadyRequested(!0),e.setLocation({latitude:t.coords.latitude,longitude:t.coords.longitude}),e.setIsLoading(!1),e.setStatus(n.Success)}),(function(){e.setAlreadyRequested(!0),e.setStatus(n.ErrorUserOrDeviceRejection)})),navigator.geolocation||(e.setStatus(n.ErrorLocationIsNotAvailableInBrowser),e.setIsLoading(!1),e.setAlreadyRequested(!0)),{status:e.status,location:e.location,isLoading:e.isLoading}}var L=i(106),w=i(111),E=i(114),S=function(e,t){return Object(E.a)(e,(function(){return function(e){return fetch(e).then((function(e){if(e.ok)return e.json();throw new Error("api fetch was unsuccesfull")}))}(e)}),t)},I=function(){var e,t,i,a,o,s,c=y(),l="nor_valid",j=S("https://api.openweathermap.org/data/2.5/weather?q=London&appid=".concat(l,"&units=metric")),h=S("https://api.openweathermap.org/data/2.5/weather?q=Berlin&appid=".concat(l,"&units=metric")),v=S("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c.location.latitude,"&lon=").concat(c.location.longitude,"&units=metric&appid=").concat(l),{enabled:!c.isLoading&&c.status===n.Success});return Object(r.useEffect)((function(){console.log(j)}),[j]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"h5",align:"center",children:"Dashboard"}),n.ErrorUserOrDeviceRejection===c.status&&Object(u.jsx)(w.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),n.ErrorLocationIsNotAvailableInBrowser===c.status&&Object(u.jsx)(w.a,{severity:"error",children:"Location api is not available in your current browser application may don't work properly"}),v.isError&&Object(u.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for your location"}),h.isError&&Object(u.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for Berlin"}),j.isError&&Object(u.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for London"}),Object(u.jsxs)(b.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(u.jsx)(b.a,{item:!0,xs:12,lg:4,children:v.isLoading||c.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:64}):Object(u.jsx)(x,{locationLabel:"My Location",temp:null===v||void 0===v||null===(e=v.data)||void 0===e||null===(t=e.main)||void 0===t?void 0:t.temp,to:"/location"})}),Object(u.jsx)(b.a,{item:!0,xs:12,lg:4,children:h.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:64}):Object(u.jsx)(x,{locationLabel:"Berlin",temp:null===h||void 0===h||null===(i=h.data)||void 0===i||null===(a=i.main)||void 0===a?void 0:a.temp,to:"/location/Berlin"})}),Object(u.jsx)(b.a,{item:!0,xs:12,lg:4,children:j.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:64}):Object(u.jsx)(x,{locationLabel:"London",temp:null===j||void 0===j||null===(o=j.data)||void 0===o||null===(s=o.main)||void 0===s?void 0:s.temp,to:"/location/London"})})]})]})},B=i(112),C=i(52),R=i(42),T=function(e){var t,i,n,r,a,o,s;return Object(u.jsxs)(u.Fragment,{children:[e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.isError?"--":null!==(t=e.weatherKind.length&&e.weatherKind.reduce((function(e,t){return"".concat(e,",").concat(t)})))&&void 0!==t?t:"--"}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsxs)(d.a,{variant:"h5",align:"center",children:[e.isError?"--":null!==(i=null===(n=e.temp)||void 0===n?void 0:n.toFixed(0))&&void 0!==i?i:"--"," \xb0C"]}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsxs)(d.a,{variant:"h6",align:"center",children:["H:",e.isError?"--":null!==(r=null===(a=e.highTemp)||void 0===a?void 0:a.toFixed(0))&&void 0!==r?r:"--","\xb0C\xa0L:",e.isError?"--":null!==(o=null===(s=e.lowTemp)||void 0===s?void 0:s.toFixed(0))&&void 0!==o?o:"--","\xb0C"]})]})},F=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.description}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsx)(d.a,{variant:"h6",align:"center",children:e.data})]})},k=i(113),N=i(107),q=function(e){return Object(N.a)(e)()},A=function(e){return{root:{backgroundColor:"transparent",boxShadow:"none"},rightSeparationBorder:{borderRight:"solid",borderRightWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},bottomSeparationBorder:{borderBottom:"solid",borderBottomWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},marginTopCentering:{marginTop:"12px"}}},U=function(e){var t,i,n,r,a=function(e,t){return new Intl.DateTimeFormat("pl-PL",{timeStyle:"short",timeZone:"UTC"}).format(Object(k.a)(new Date(1e3*e),t))},o=q(A);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(b.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:o.bottomSeparationBorder,children:[Object(u.jsx)(b.a,{item:!0,xs:6,className:o.rightSeparationBorder,children:Object(u.jsx)(F,{description:"Sunrise",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":a(null!==(t=e.sunrise)&&void 0!==t?t:0,null!==(i=e.timezone)&&void 0!==i?i:0)})}),Object(u.jsx)(b.a,{item:!0,xs:6,children:Object(u.jsx)(F,{description:"Sunset",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":a(null!==(n=e.sunset)&&void 0!==n?n:0,null!==(r=e.timezone)&&void 0!==r?r:0)})})]}),Object(u.jsxs)(b.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:o.marginTopCentering,children:[Object(u.jsx)(b.a,{item:!0,xs:6,className:o.rightSeparationBorder,children:Object(u.jsx)(F,{description:"Humidity",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- %":"".concat(e.humidity.toFixed(0)," %")})}),Object(u.jsx)(b.a,{item:!0,xs:6,children:Object(u.jsx)(F,{description:"Visibility",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- km":"".concat((e.visibility/1e3).toFixed(2)," km")})})]})]})},D=function(e){return Object(u.jsxs)(b.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(u.jsx)(b.a,{item:!0,xs:12,lg:6,children:Object(u.jsx)(T,Object(R.a)({},e))}),Object(u.jsx)(b.a,{item:!0,xs:12,lg:6,children:Object(u.jsx)(U,Object(R.a)({},e))})]})},z=i(105),W=i(108),_=function(e){return Object(u.jsxs)(b.a,{container:!0,children:[Object(u.jsx)(b.a,{item:!0,xs:1,children:Object(u.jsx)(z.a,{component:g.b,to:"/",children:Object(u.jsx)(W.a,{})})}),Object(u.jsx)(b.a,{item:!0,xs:10,children:Object(u.jsx)(d.a,{variant:"h5",align:"center",children:e.label})})]})},K=function(){var e,t,i,n,r,a,o=Object(c.f)().cityName,s=S("https://api.openweathermap.org/data/2.5/weather?q=".concat(o,"&appid=").concat("","&units=metric")),d=s.data;return Object(u.jsxs)(u.Fragment,{children:["  ",Object(u.jsx)(l.a,{children:Object(u.jsxs)("title",{children:["Weather in ",o]})}),Object(u.jsx)(_,{label:o}),s.isError&&Object(u.jsxs)(w.a,{severity:"error",children:["Error during fetching temperature data for ",o]}),Object(u.jsx)(D,{isError:s.isError,isLoading:s.isLoading,timezone:null===d||void 0===d?void 0:d.timezone,temp:null===d||void 0===d?void 0:d.main.temp,highTemp:null===d||void 0===d||null===(e=d.main)||void 0===e?void 0:e.temp_max,lowTemp:null===d||void 0===d||null===(t=d.main)||void 0===t?void 0:t.temp_min,weatherKind:null===d||void 0===d||null===(i=d.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===d||void 0===d||null===(n=d.sys)||void 0===n?void 0:n.sunrise,sunset:null===d||void 0===d||null===(r=d.sys)||void 0===r?void 0:r.sunset,humidity:null===d||void 0===d||null===(a=d.main)||void 0===a?void 0:a.humidity,visibility:null===d||void 0===d?void 0:d.visibility})]})},P=function(){var e,t,i,r,a,o,s=y(),c=S("https://api.openweathermap.org/data/2.5/weather?lat=".concat(s.location.latitude,"&lon=").concat(s.location.longitude,"&units=metric&appid=").concat(""),{enabled:!s.isLoading&&s.status===n.Success}),l=c.data;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(_,{label:"My Location"}),n.ErrorUserOrDeviceRejection===s.status&&Object(u.jsx)(w.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),n.ErrorLocationIsNotAvailableInBrowser===s.status&&Object(u.jsx)(w.a,{severity:"error",children:"Location api is not available in your current browser application may don't work properly"}),c.isError&&Object(u.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for your location"}),Object(u.jsx)(D,{isError:c.isError||[n.ErrorLocationIsNotAvailableInBrowser,n.ErrorUserOrDeviceRejection].includes(s.status),timezone:null===l||void 0===l?void 0:l.timezone,isLoading:c.isLoading||s.isLoading,temp:null===l||void 0===l?void 0:l.main.temp,highTemp:null===l||void 0===l||null===(e=l.main)||void 0===e?void 0:e.temp_max,lowTemp:null===l||void 0===l||null===(t=l.main)||void 0===t?void 0:t.temp_min,weatherKind:null===l||void 0===l||null===(i=l.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===l||void 0===l||null===(r=l.sys)||void 0===r?void 0:r.sunrise,sunset:null===l||void 0===l||null===(a=l.sys)||void 0===a?void 0:a.sunset,humidity:null===l||void 0===l||null===(o=l.main)||void 0===o?void 0:o.humidity,visibility:null===l||void 0===l?void 0:l.visibility})]})},M=i(109),H=i(53),J=i(110),V=i(76),Z=new B.a({defaultOptions:{queries:{cacheTime:6e4,staleTime:3e4}}});var G=function(){var e=function(e){return Object(u.jsxs)(c.a,{path:e.path,exact:e.exact,children:[Object(u.jsx)(l.a,{children:Object(u.jsx)("title",{children:e.title})}),e.children]})},t=Object(M.a)("(prefers-color-scheme: dark)");Object(r.useEffect)((function(){document.getElementsByTagName("body")[0].style.backgroundColor=t?"black":"white"}),[t]);var i=Object(r.useMemo)((function(){return Object(H.a)({palette:{type:t?"dark":"light"}})}),[t]),n=function(){var e=Object(r.useState)(O.status),t=Object(p.a)(e,2),i=t[0],n=t[1],a=Object(r.useState)(O.location),o=Object(p.a)(a,2),s=o[0],c=o[1],l=Object(r.useState)(O.isLoading),d=Object(p.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(O.alreadyRequested),h=Object(p.a)(b,2);return{status:i,setStatus:n,setIsLoading:j,setLocation:c,isLoading:u,location:s,alreadyRequested:h[0],setAlreadyRequested:h[1]}}(),a=q(A);return Object(u.jsx)(J.a,{theme:i,children:Object(u.jsx)(V.a,{className:a.root,children:Object(u.jsx)(f.Provider,{value:n,children:Object(u.jsx)(C.a,{client:Z,children:Object(u.jsxs)(c.c,{children:[Object(u.jsx)(e,{exact:!0,path:"/location",title:"Weather in my location",children:Object(u.jsx)(P,{})}),Object(u.jsx)(c.a,{exact:!0,path:"/location/:cityName",children:Object(u.jsx)(K,{})}),Object(u.jsx)(e,{exact:!0,path:"/",title:"Wheater Forecasting Service",children:Object(u.jsx)(I,{})}),Object(u.jsx)(e,{path:"*",title:"404 page not found",children:Object(u.jsx)(j,{})})]})})})})})};s.a.render(Object(u.jsx)(g.a,{basename:"/",children:Object(u.jsx)(G,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.31d2316d.chunk.js.map