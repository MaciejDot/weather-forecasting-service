(this["webpackJsonpweather-forecasting-service"]=this["webpackJsonpweather-forecasting-service"]||[]).push([[0],{76:function(e,t,i){"use strict";i.r(t);var n,a=i(0),r=i.n(a),o=i(24),c=i.n(o),s=i(10),l=i(33),d=i(100),u=i(2),j=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"h2",align:"center",children:"404"}),Object(u.jsx)(d.a,{variant:"h4",align:"center",children:"Page not found"})]})},b=i(107),h=i(105),v=i(102),m=i(103),x=i(104),g=i(21),p=function(e){var t,i;return Object(u.jsx)(v.a,{children:Object(u.jsx)(m.a,{component:g.b,to:e.to,children:Object(u.jsx)(x.a,{children:Object(u.jsxs)(h.a,{container:!0,children:[Object(u.jsx)(h.a,{item:!0,xs:6,children:Object(u.jsx)(d.a,{variant:"h6",align:"left",children:e.locationLabel})}),Object(u.jsx)(h.a,{item:!0,xs:6,children:Object(u.jsxs)(d.a,{variant:"h6",align:"right",children:[null!==(t=null===(i=e.temp)||void 0===i?void 0:i.toFixed(0))&&void 0!==t?t:"-","\xb0C"]})})]})})})})},O=i(32);!function(e){e[e.Undefined=0]="Undefined",e[e.Success=1]="Success",e[e.ErrorUserOrDeviceRejection=2]="ErrorUserOrDeviceRejection",e[e.ErrorLocationIsNotAvailableInBrowser=3]="ErrorLocationIsNotAvailableInBrowser"}(n||(n={}));var f={status:n.Undefined,isLoading:!0,location:{latitude:0,longitude:0},alreadyRequested:!1,setAlreadyRequested:function(e){},setLocation:function(e){},setIsLoading:function(e){},setStatus:function(e){}},y=r.a.createContext(f);function w(){var e=Object(a.useContext)(y);return!e.alreadyRequested&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setAlreadyRequested(!0),e.setLocation({latitude:t.coords.latitude,longitude:t.coords.longitude}),e.setIsLoading(!1),e.setStatus(n.Success)}),(function(){e.setAlreadyRequested(!0),e.setStatus(n.ErrorUserOrDeviceRejection)})),navigator.geolocation||(e.setStatus(n.ErrorLocationIsNotAvailableInBrowser),e.setIsLoading(!1),e.setAlreadyRequested(!0)),{status:e.status,location:e.location,isLoading:e.isLoading}}var L=i(109),E=i(113),C=i(116),S=function(e){return fetch(e).then((function(e){if(e.ok)return e.json();throw new Error("api fetch was unsuccesfull")}))},I=function(e,t){return Object(C.a)(e,(function(){return S(e)}),t)},N=i(117),B=i(106),R=function(e){return Object(B.a)(e)()},T=function(e){return{spaceAfterAppBar:{height:"40px",width:"100%"},verticalCenteredContent:{margin:0,position:"absolute",width:"calc(100% - 32px)",top:"50%",transform:"translateY(-50%)"},weatherDataCard:{position:"relative",height:"37vh"},root:{backgroundColor:"transparent",boxShadow:"none"},rightSeparationBorder:{borderRight:"solid",borderRightWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},bottomSeparationBorder:{borderBottom:"solid",borderBottomWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},marginTopCentering:{marginTop:"12px"}}},A=function(){var e=R(T);return Object(u.jsx)("div",{className:e.spaceAfterAppBar})},k=function(){var e,t,i,a=w(),r=["Berlin","London"],o="9089be81539373b8ac2105776b85e563",c=(i=r.map((function(e){return"https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat(o,"&units=metric")})),Object(N.a)(i.map((function(e){return{queryKey:[e],queryFn:function(){return S(e)}}})))),s=I("https://api.openweathermap.org/data/2.5/weather?lat=".concat(a.location.latitude,"&lon=").concat(a.location.longitude,"&units=metric&appid=").concat(o),{enabled:!a.isLoading&&a.status===n.Success});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.a,{children:Object(u.jsx)(d.a,{variant:"h5",align:"center",children:"Dashboard"})}),Object(u.jsx)(A,{}),n.ErrorUserOrDeviceRejection===a.status&&Object(u.jsx)(E.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),n.ErrorLocationIsNotAvailableInBrowser===a.status&&Object(u.jsx)(E.a,{severity:"error",children:"Location api is not available in your current browser application may don't work properly"}),s.isError&&Object(u.jsx)(E.a,{severity:"error",children:"Error during fetching temperature data for your location"}),r.map((function(e,t){return c[t].isError&&Object(u.jsxs)(E.a,{severity:"error",children:["Error during fetching temperature data for ",e]},e)})),Object(u.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(u.jsx)(h.a,{item:!0,xs:12,lg:4,id:"my-location",children:s.isLoading||a.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:64}):Object(u.jsx)(p,{locationLabel:"My Location",temp:null===s||void 0===s||null===(e=s.data)||void 0===e||null===(t=e.main)||void 0===t?void 0:t.temp,to:"/location"})}),r.map((function(e,t){var i,n;return Object(u.jsx)(h.a,{item:!0,xs:12,lg:4,id:e,children:c[t].isLoading?Object(u.jsx)(L.a,{animation:"wave",height:64}):Object(u.jsx)(p,{locationLabel:e,temp:null===(i=c[t].data)||void 0===i||null===(n=i.main)||void 0===n?void 0:n.temp,to:"/location/".concat(e)})},e)}))]})]})},q=i(114),F=i(39),D=i(43),U=function(e){var t,i,n,a,r,o,c,s,l=R(T);return Object(u.jsx)(v.a,{className:l.weatherDataCard,children:Object(u.jsx)(x.a,{children:Object(u.jsxs)("div",{className:l.verticalCenteredContent,children:[e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.isError?"--":null!==(t=(null===(i=e.weatherKind)||void 0===i?void 0:i.length)&&e.weatherKind.reduce((function(e,t){return"".concat(e,",").concat(t)})))&&void 0!==t?t:"--"}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsxs)(d.a,{variant:"h5",align:"center",children:[e.isError?"--":null!==(n=null===(a=e.temp)||void 0===a?void 0:a.toFixed(0))&&void 0!==n?n:"--"," \xb0C"]}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsxs)(d.a,{variant:"h6",align:"center",children:["H:",e.isError?"--":null!==(r=null===(o=e.highTemp)||void 0===o?void 0:o.toFixed(0))&&void 0!==r?r:"--","\xb0C\xa0L:",e.isError?"--":null!==(c=null===(s=e.lowTemp)||void 0===s?void 0:s.toFixed(0))&&void 0!==c?c:"--","\xb0C"]})]})})})},z=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.description}),e.isLoading?Object(u.jsx)(L.a,{animation:"wave",height:50}):Object(u.jsx)(d.a,{variant:"h6",align:"center",children:e.data})]})},K=i(115),W=function(e){var t,i,n,a,r,o,c=function(e,t){return new Intl.DateTimeFormat("pl-PL",{timeStyle:"short",timeZone:"UTC"}).format(Object(K.a)(new Date(1e3*e),t))},s=R(T);return Object(u.jsx)(v.a,{className:s.weatherDataCard,children:Object(u.jsx)(x.a,{children:Object(u.jsxs)("div",{className:s.verticalCenteredContent,children:[Object(u.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:s.bottomSeparationBorder,children:[Object(u.jsx)(h.a,{item:!0,xs:6,className:s.rightSeparationBorder,children:Object(u.jsx)(z,{description:"Sunrise",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":c(null!==(t=e.sunrise)&&void 0!==t?t:0,null!==(i=e.timezone)&&void 0!==i?i:0)})}),Object(u.jsx)(h.a,{item:!0,xs:6,children:Object(u.jsx)(z,{description:"Sunset",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":c(null!==(n=e.sunset)&&void 0!==n?n:0,null!==(a=e.timezone)&&void 0!==a?a:0)})})]}),Object(u.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:s.marginTopCentering,children:[Object(u.jsx)(h.a,{item:!0,xs:6,className:s.rightSeparationBorder,children:Object(u.jsx)(z,{description:"Humidity",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- %":"".concat(null===(r=e.humidity)||void 0===r?void 0:r.toFixed(0)," %")})}),Object(u.jsx)(h.a,{item:!0,xs:6,children:Object(u.jsx)(z,{description:"Visibility",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- km":"".concat(((null!==(o=e.visibility)&&void 0!==o?o:0)/1e3).toFixed(2)," km")})})]})]})})})},P=function(e){return Object(u.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(u.jsx)(h.a,{item:!0,xs:12,lg:6,children:Object(u.jsx)(U,Object(D.a)({},e))}),Object(u.jsx)(h.a,{item:!0,xs:12,lg:6,children:Object(u.jsx)(W,Object(D.a)({},e))})]})},_=i(108),M=i(110),H=function(e){return Object(u.jsx)(b.a,{children:Object(u.jsxs)(h.a,{container:!0,children:[Object(u.jsx)(h.a,{item:!0,xs:1,children:Object(u.jsx)(_.a,{component:g.b,to:"/",size:"small",children:Object(u.jsx)(M.a,{})})}),Object(u.jsx)(h.a,{item:!0,xs:10,children:Object(u.jsx)(d.a,{variant:"h5",align:"center",children:e.label})})]})})},J=function(){var e,t,i,n,a,r,o=Object(s.f)().cityName,c=I("https://api.openweathermap.org/data/2.5/weather?q=".concat(o,"&appid=").concat("9089be81539373b8ac2105776b85e563","&units=metric")),d=c.data;return Object(u.jsxs)(u.Fragment,{children:["  ",Object(u.jsx)(l.a,{children:Object(u.jsxs)("title",{children:["Weather in ",o]})}),Object(u.jsx)(H,{label:o}),Object(u.jsx)(A,{}),c.isError&&Object(u.jsxs)(E.a,{severity:"error",children:["Error during fetching temperature data for ",o]}),Object(u.jsx)(P,{isError:c.isError,isLoading:c.isLoading,timezone:null===d||void 0===d?void 0:d.timezone,temp:null===d||void 0===d?void 0:d.main.temp,highTemp:null===d||void 0===d||null===(e=d.main)||void 0===e?void 0:e.temp_max,lowTemp:null===d||void 0===d||null===(t=d.main)||void 0===t?void 0:t.temp_min,weatherKind:null===d||void 0===d||null===(i=d.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===d||void 0===d||null===(n=d.sys)||void 0===n?void 0:n.sunrise,sunset:null===d||void 0===d||null===(a=d.sys)||void 0===a?void 0:a.sunset,humidity:null===d||void 0===d||null===(r=d.main)||void 0===r?void 0:r.humidity,visibility:null===d||void 0===d?void 0:d.visibility})]})},V=function(){var e,t,i,a,r,o,c=w(),s=I("https://api.openweathermap.org/data/2.5/weather?lat=".concat(c.location.latitude,"&lon=").concat(c.location.longitude,"&units=metric&appid=").concat("9089be81539373b8ac2105776b85e563"),{enabled:!c.isLoading&&c.status===n.Success}),l=s.data;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(H,{label:"My Location"}),Object(u.jsx)(A,{}),n.ErrorUserOrDeviceRejection===c.status&&Object(u.jsx)(E.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),n.ErrorLocationIsNotAvailableInBrowser===c.status&&Object(u.jsx)(E.a,{severity:"error",children:"Location api is not available in your current browser application may don't work properly"}),s.isError&&Object(u.jsx)(E.a,{severity:"error",children:"Error during fetching temperature data for your location"}),Object(u.jsx)(P,{isError:s.isError||[n.ErrorLocationIsNotAvailableInBrowser,n.ErrorUserOrDeviceRejection].includes(c.status),timezone:null===l||void 0===l?void 0:l.timezone,isLoading:s.isLoading||c.isLoading,temp:null===l||void 0===l?void 0:l.main.temp,highTemp:null===l||void 0===l||null===(e=l.main)||void 0===e?void 0:e.temp_max,lowTemp:null===l||void 0===l||null===(t=l.main)||void 0===t?void 0:t.temp_min,weatherKind:null===l||void 0===l||null===(i=l.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===l||void 0===l||null===(a=l.sys)||void 0===a?void 0:a.sunrise,sunset:null===l||void 0===l||null===(r=l.sys)||void 0===r?void 0:r.sunset,humidity:null===l||void 0===l||null===(o=l.main)||void 0===o?void 0:o.humidity,visibility:null===l||void 0===l?void 0:l.visibility})]})},Y=i(111),Z=i(56),G=i(112),Q=i(59),X=new q.a({defaultOptions:{queries:{cacheTime:6e4,staleTime:3e4}}});var $=function(){var e=function(e){return Object(u.jsxs)(s.a,{path:e.path,exact:e.exact,children:[Object(u.jsx)(l.a,{children:Object(u.jsx)("title",{children:e.title})}),e.children]})},t=Object(Y.a)("(prefers-color-scheme: dark)");Object(a.useEffect)((function(){document.getElementsByTagName("body")[0].style.backgroundColor=t?"black":"white"}),[t]);var i=Object(a.useMemo)((function(){return Object(Z.a)({palette:{type:t?"dark":"light"}})}),[t]),n=function(){var e=Object(a.useState)(f.status),t=Object(O.a)(e,2),i=t[0],n=t[1],r=Object(a.useState)(f.location),o=Object(O.a)(r,2),c=o[0],s=o[1],l=Object(a.useState)(f.isLoading),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(f.alreadyRequested),h=Object(O.a)(b,2);return{status:i,setStatus:n,setIsLoading:j,setLocation:s,isLoading:u,location:c,alreadyRequested:h[0],setAlreadyRequested:h[1]}}(),r=R(T);return Object(u.jsx)(G.a,{theme:i,children:Object(u.jsx)(Q.a,{className:r.root,children:Object(u.jsx)(y.Provider,{value:n,children:Object(u.jsx)(F.a,{client:X,children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(e,{exact:!0,path:"/location",title:"Weather in my location",children:Object(u.jsx)(V,{})}),Object(u.jsx)(s.a,{exact:!0,path:"/location/:cityName",children:Object(u.jsx)(J,{})}),Object(u.jsx)(e,{exact:!0,path:"/",title:"Wheater Forecasting Service",children:Object(u.jsx)(k,{})}),Object(u.jsx)(e,{path:"*",title:"404 page not found",children:Object(u.jsx)(j,{})})]})})})})})};c.a.render(Object(u.jsx)(g.a,{basename:"/",children:Object(u.jsx)($,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.9e22470f.chunk.js.map