(this["webpackJsonpweather-forecasting-service"]=this["webpackJsonpweather-forecasting-service"]||[]).push([[0],{74:function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n),a=i(24),o=i.n(a),c=i(9),s=i(22),l=i(33),d=i(99),j=i(2),u=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.a,{variant:"h2",align:"center",children:"404"}),Object(j.jsx)(d.a,{variant:"h4",align:"center",children:"Page not found"})]})},h=i(104),b=i(114),m=i(101),v=i(102),g=i(103),x=function(e){var t,i;return Object(j.jsx)(m.a,{children:Object(j.jsx)(v.a,{component:s.b,to:e.to,children:Object(j.jsx)(g.a,{children:Object(j.jsxs)(h.a,{container:!0,children:[Object(j.jsx)(h.a,{item:!0,xs:6,children:Object(j.jsx)(d.a,{variant:"h6",align:"left",children:e.locationLabel})}),Object(j.jsx)(h.a,{item:!0,xs:6,children:Object(j.jsxs)(d.a,{variant:"h6",align:"right",children:[null!==(t=null===(i=e.temp)||void 0===i?void 0:i.toFixed(0))&&void 0!==t?t:"-","\xb0C"]})})]})})})})},O=i(32),p={isError:!1,isLoading:!0,location:{latitude:0,longitude:0},alreadyRequested:!1,setAlreadyRequested:function(e){},setLocation:function(e){},setIsLoading:function(e){},setIsError:function(e){}},f=r.a.createContext(p);function y(){var e=Object(n.useContext)(f);return!e.alreadyRequested&&navigator.geolocation.getCurrentPosition((function(t){e.setAlreadyRequested(!0),e.setLocation({latitude:t.coords.latitude,longitude:t.coords.longitude}),e.setIsLoading(!1),e.setIsError(!1)}),(function(){e.setAlreadyRequested(!0),e.setIsError(!0)})),{isError:e.isError,location:e.location,isLoading:e.isLoading}}var L=i(106),w=i(111),E=function(){var e,t,i,n,r,a,o=y(),c="9089be81539373b8ac2105776b85e563",s=Object(b.a)("london-weather",(function(){return fetch("https://api.openweathermap.org/data/2.5/weather?q=London&appid=".concat(c,"&units=metric")).then((function(e){return e.json()}))})),l=Object(b.a)("berlin-weather",(function(){return fetch("https://api.openweathermap.org/data/2.5/weather?q=Berlin&appid=".concat(c,"&units=metric")).then((function(e){return e.json()}))})),u=Object(b.a)("my-location-weather",(function(){return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(o.location.latitude,"&lon=").concat(o.location.longitude,"&units=metric&appid=").concat(c)).then((function(e){return e.json()}))}),{enabled:!o.isLoading&&!o.isError});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.a,{variant:"h5",align:"center",children:"Dashboard"}),o.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),u.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for your location"}),l.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for Berlin"}),s.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for London"}),Object(j.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(j.jsx)(h.a,{item:!0,xs:12,lg:4,children:u.isLoading||o.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:64}):Object(j.jsx)(x,{locationLabel:"My Location",temp:null===u||void 0===u||null===(e=u.data)||void 0===e||null===(t=e.main)||void 0===t?void 0:t.temp,to:"/location"})}),Object(j.jsx)(h.a,{item:!0,xs:12,lg:4,children:l.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:64}):Object(j.jsx)(x,{locationLabel:"Berlin",temp:null===l||void 0===l||null===(i=l.data)||void 0===i||null===(n=i.main)||void 0===n?void 0:n.temp,to:"/location/Berlin"})}),Object(j.jsx)(h.a,{item:!0,xs:12,lg:4,children:s.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:64}):Object(j.jsx)(x,{locationLabel:"London",temp:null===s||void 0===s||null===(r=s.data)||void 0===r||null===(a=r.main)||void 0===a?void 0:a.temp,to:"/location/London"})})]})]})},C=i(112),T=i(53),F=i(43),S=function(e){var t,i,n,r,a,o,c;return Object(j.jsxs)(j.Fragment,{children:[e.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:50}):Object(j.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.isError?"--":null!==(t=e.weatherKind.length&&e.weatherKind.reduce((function(e,t){return"".concat(e,",").concat(t)})))&&void 0!==t?t:"--"}),e.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:50}):Object(j.jsxs)(d.a,{variant:"h5",align:"center",children:[e.isError?"--":null!==(i=null===(n=e.temp)||void 0===n?void 0:n.toFixed(0))&&void 0!==i?i:"--"," \xb0C"]}),e.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:50}):Object(j.jsxs)(d.a,{variant:"h6",align:"center",children:["H:",e.isError?"--":null!==(r=null===(a=e.highTemp)||void 0===a?void 0:a.toFixed(0))&&void 0!==r?r:"--","\xb0C\xa0L:",e.isError?"--":null!==(o=null===(c=e.lowTemp)||void 0===c?void 0:c.toFixed(0))&&void 0!==o?o:"--","\xb0C"]})]})},B=function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d.a,{variant:"subtitle1",align:"center",children:e.description}),e.isLoading?Object(j.jsx)(L.a,{animation:"wave",height:50}):Object(j.jsx)(d.a,{variant:"h6",align:"center",children:e.data})]})},I=i(113),q=i(107),k=function(e){return Object(q.a)(e)()},R=function(e){return{root:{backgroundColor:"transparent",boxShadow:"none"},rightSeparationBorder:{borderRight:"solid",borderRightWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},bottomSeparationBorder:{borderBottom:"solid",borderBottomWidth:"0.5px",borderColor:"dark"===e.palette.type?"rgba(150, 150, 150, 0.12)":"rgba(100, 100, 100, 0.12)"},marginTopCentering:{marginTop:"12px"}}},N=function(e){var t,i,n,r,a=function(e,t){return new Intl.DateTimeFormat("pl-PL",{timeStyle:"short",timeZone:"UTC"}).format(Object(I.a)(new Date(1e3*e),t))},o=k(R);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:o.bottomSeparationBorder,children:[Object(j.jsx)(h.a,{item:!0,xs:6,className:o.rightSeparationBorder,children:Object(j.jsx)(B,{description:"Sunrise",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":a(null!==(t=e.sunrise)&&void 0!==t?t:0,null!==(i=e.timezone)&&void 0!==i?i:0)})}),Object(j.jsx)(h.a,{item:!0,xs:6,children:Object(j.jsx)(B,{description:"Sunset",isLoading:e.isLoading,data:e.isError||e.isLoading?"--:--":a(null!==(n=e.sunset)&&void 0!==n?n:0,null!==(r=e.timezone)&&void 0!==r?r:0)})})]}),Object(j.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",className:o.marginTopCentering,children:[Object(j.jsx)(h.a,{item:!0,xs:6,className:o.rightSeparationBorder,children:Object(j.jsx)(B,{description:"Humidity",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- %":"".concat(e.humidity.toFixed(0)," %")})}),Object(j.jsx)(h.a,{item:!0,xs:6,children:Object(j.jsx)(B,{description:"Visibility",isLoading:e.isLoading,data:e.isError||e.isLoading?"--.-- km":"".concat((e.visibility/1e3).toFixed(2)," km")})})]})]})},z=function(e){return Object(j.jsxs)(h.a,{container:!0,alignItems:"center",spacing:3,justifyContent:"space-evenly",children:[Object(j.jsx)(h.a,{item:!0,xs:12,lg:6,children:Object(j.jsx)(S,Object(F.a)({},e))}),Object(j.jsx)(h.a,{item:!0,xs:12,lg:6,children:Object(j.jsx)(N,Object(F.a)({},e))})]})},W=i(105),A=i(108),K=function(e){return Object(j.jsxs)(h.a,{container:!0,children:[Object(j.jsx)(h.a,{item:!0,xs:1,children:Object(j.jsx)(W.a,{component:s.b,to:"/",children:Object(j.jsx)(A.a,{})})}),Object(j.jsx)(h.a,{item:!0,xs:10,children:Object(j.jsx)(d.a,{variant:"h5",align:"center",children:e.label})})]})},P=function(){var e,t,i,n,r,a,o=Object(c.f)().cityName,s=Object(b.a)("".concat(o,"-weather"),(function(){return fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(o,"&appid=").concat("9089be81539373b8ac2105776b85e563","&units=metric")).then((function(e){return e.json()}))})),d=s.data;return Object(j.jsxs)(j.Fragment,{children:["  ",Object(j.jsx)(l.a,{children:Object(j.jsxs)("title",{children:["Weather in ",o]})}),Object(j.jsx)(K,{label:o}),s.isError&&Object(j.jsxs)(w.a,{severity:"error",children:["Error during fetching temperature data for ",o]}),Object(j.jsx)(z,{isError:s.isError,isLoading:s.isLoading,timezone:null===d||void 0===d?void 0:d.timezone,temp:null===d||void 0===d?void 0:d.main.temp,highTemp:null===d||void 0===d||null===(e=d.main)||void 0===e?void 0:e.temp_max,lowTemp:null===d||void 0===d||null===(t=d.main)||void 0===t?void 0:t.temp_min,weatherKind:null===d||void 0===d||null===(i=d.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===d||void 0===d||null===(n=d.sys)||void 0===n?void 0:n.sunrise,sunset:null===d||void 0===d||null===(r=d.sys)||void 0===r?void 0:r.sunset,humidity:null===d||void 0===d||null===(a=d.main)||void 0===a?void 0:a.humidity,visibility:null===d||void 0===d?void 0:d.visibility})]})},_=function(){var e,t,i,n,r,a,o=y(),c=Object(b.a)("my-location-weather",(function(){return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(o.location.latitude,"&lon=").concat(o.location.longitude,"&units=metric&appid=").concat("9089be81539373b8ac2105776b85e563")).then((function(e){return e.json()}))}),{enabled:!o.isLoading&&!o.isError}),s=c.data;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(K,{label:"My Location"}),o.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Turn on location in your browser to see weather result for your city"}),c.isError&&Object(j.jsx)(w.a,{severity:"error",children:"Error during fetching temperature data for your location"}),Object(j.jsx)(z,{isError:c.isError||o.isError,timezone:null===s||void 0===s?void 0:s.timezone,isLoading:c.isLoading||o.isLoading,temp:null===s||void 0===s?void 0:s.main.temp,highTemp:null===s||void 0===s||null===(e=s.main)||void 0===e?void 0:e.temp_max,lowTemp:null===s||void 0===s||null===(t=s.main)||void 0===t?void 0:t.temp_min,weatherKind:null===s||void 0===s||null===(i=s.weather)||void 0===i?void 0:i.map((function(e){return e.main})),sunrise:null===s||void 0===s||null===(n=s.sys)||void 0===n?void 0:n.sunrise,sunset:null===s||void 0===s||null===(r=s.sys)||void 0===r?void 0:r.sunset,humidity:null===s||void 0===s||null===(a=s.main)||void 0===a?void 0:a.humidity,visibility:null===s||void 0===s?void 0:s.visibility})]})},D=i(109),M=i(54),H=i(110),J=i(76),U=new C.a({defaultOptions:{queries:{cacheTime:6e4,staleTime:3e4}}});var V=function(){var e=function(e){return Object(j.jsxs)(c.a,{path:e.path,exact:e.exact,children:[Object(j.jsx)(l.a,{children:Object(j.jsx)("title",{children:e.title})}),e.children]})},t=Object(D.a)("(prefers-color-scheme: dark)");Object(n.useEffect)((function(){document.getElementsByTagName("body")[0].style.backgroundColor=t?"black":"white"}),[t]);var i=Object(n.useMemo)((function(){return Object(M.a)({palette:{type:t?"dark":"light"}})}),[t]),r=function(){var e=Object(n.useState)(p.isError),t=Object(O.a)(e,2),i=t[0],r=t[1],a=Object(n.useState)(p.location),o=Object(O.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(p.isLoading),d=Object(O.a)(l,2),j=d[0],u=d[1],h=Object(n.useState)(p.alreadyRequested),b=Object(O.a)(h,2);return{isError:i,setIsError:r,setIsLoading:u,setLocation:s,isLoading:j,location:c,alreadyRequested:b[0],setAlreadyRequested:b[1]}}(),a=k(R);return Object(j.jsx)(H.a,{theme:i,children:Object(j.jsx)(J.a,{className:a.root,children:Object(j.jsx)(f.Provider,{value:r,children:Object(j.jsx)(T.a,{client:U,children:Object(j.jsx)(s.a,{basename:"/",children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(e,{exact:!0,path:"/location",title:"Weather in my location",children:Object(j.jsx)(_,{})}),Object(j.jsx)(c.a,{exact:!0,path:"/location/:cityName",children:Object(j.jsx)(P,{})}),Object(j.jsx)(e,{exact:!0,path:"/",title:"Wheater Forecasting Service",children:Object(j.jsx)(E,{})}),Object(j.jsx)(e,{path:"*",title:"404 page not found",children:Object(j.jsx)(u,{})})]})})})})})})};o.a.render(Object(j.jsx)(V,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.5ca09566.chunk.js.map